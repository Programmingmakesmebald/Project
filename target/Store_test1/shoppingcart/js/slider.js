(function(a){a.fn.commSlider=function(b){var c={prevId:"prevBtn",prevText:"",prevClass:"prevBtn",prevgClass:"unavailable_l",nextId:"nextBtn",nextText:"",nextClass:"nextBtn",nextgClass:"unavailable_r",controlsShow:true,controlsBefore:"",controlsAfter:"",controlsFade:true,firstId:"firstBtn",firstText:"",firstShow:true,lastId:"lastBtn",lastText:"",lastShow:true,vertical:false,speed:1000,auto:false,pause:2000,continuous:false,style:"",callback:"",from:"",currentPage:1,totalPage:5};var b=a.extend(c,b);this.each(function(){var e=a(this);var m=a("li",e).length;var k=a("li",e).outerWidth();var f=a("li",e).height();e.width(typeof b.width!=="undefined"?b.width:892);e.height(f);e.css({overflow:"hidden",margin:"0 auto"});var i=0;if(b.from==="exchange"){if(parseInt((m/6))<(m/6)){i=parseInt((m/6))}else{i=parseInt((m/6))-1}}else{if(b.from==="getMoreCollectProduct"){if(parseInt((m/4))<(m/4)){i=parseInt((m/4))}else{i=parseInt((m/4))-1}}else{if(parseInt((m/5))<(m/5)){i=parseInt((m/5))}else{i=parseInt((m/5))-1}}}var l=0;a("ul",e).css("width",m*k);if(!b.vertical){a("li",e).css("float","left")}if(typeof b.callback==="function"){b.callback(1)}if(b.controlsShow){var g="";if(b.firstShow){g+='<span id="'+b.prevId+'"><a name="nextpage" style = "'+b.style+'" class="'+b.prevgClass+" "+b.prevClass+'"  href="javascript:void(0);">'+b.firstText+"</a></span>"}a(e).before(g);g="";if(b.lastShow){if(i==0){g+=' <span id="'+b.nextId+'"><a  name="nextpage" style = "'+b.style+'" class="'+b.nextgClass+" "+b.nextClass+'"  href="javascript:void(0);">'+b.lastText+"</a></span>"}else{g+=' <span id="'+b.nextId+'"><a  name="nextpage" style = "'+b.style+'" class="'+b.nextClass+'"  href="javascript:void(0);">'+b.lastText+"</a></span>"}}g+="";a(e).before(g)}a("a","#"+b.nextId).click(function(){if(b.currentPage+1<=b.totalPage){if(b.currentPage!=1){l=b.currentPage-1}e.parent().find(".J_currentPage").html(++b.currentPage);d("next",true);if(typeof b.callback==="function"){b.callback(l+1)}}});a("a","#"+b.firstId).click(function(){l=0;if(typeof b.callback==="function"){b.callback(1)}d("first",true)});a("a","#"+b.prevId).click(function(){if(b.currentPage-1>=1){if(b.currentPage!=1){l=b.currentPage-1}e.parent().find(".J_currentPage").html(--b.currentPage);d("prev",true);if(typeof b.callback==="function"){b.callback(l+1)}}});a("a","#"+b.lastId).click(function(){d("last",true)});function d(h,n){var o=l;switch(h){case"next":l=(o>=i)?i:l+1;break;case"prev":l=(l<=0)?0:l-1;break;case"first":l=0;break;case"last":l=i;break;default:break}var r=Math.abs(o-l);var q=r*b.speed;if(!b.vertical){p=(l*5*k*-1);if(b.from==="exchange"){p=(l*6*k*-1)}if(b.from==="getMoreCollectProduct"){p=(l*4*k*-1)}a("ul",e).animate({marginLeft:p},q)}else{p=(l*f*-1);a("ul",e).animate({marginTop:p},q)}if(b.continuous&&b.controlsFade){if(l==i){if(!b.cycle){b.currentPage=b.totalPage;e.parent().find(".J_currentPage").html(b.totalPage);a("a","#"+b.nextId).addClass(b.nextgClass)}}else{a("a","#"+b.nextId).removeClass(b.nextgClass)}if(l==0){if(!b.cycle){b.currentPage=1;e.parent().find(".J_currentPage").html(1);a("a","#"+b.prevId).addClass(b.prevClass);a("a","#"+b.prevId).addClass(b.prevgClass)}}else{a("a","#"+b.prevId).removeClass(b.prevgClass)}}if(n){clearTimeout(j)}if(b.auto&&h=="next"&&!n){j=setTimeout(function(){d("next",false)},r*b.speed+b.pause)}}var j;if(b.auto){j=setTimeout(function(){d("next",false)},b.pause)}if(!b.continuous&&b.controlsFade){a("a","#"+b.prevId).hide();a("a","#"+b.firstId).hide()}})}})(jQuery);